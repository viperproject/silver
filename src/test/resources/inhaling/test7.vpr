field f: Int

method test7a(x: Ref, y: Ref, i: Int)
    requires acc(x.f) && acc(y.f)
    requires y.f == 42
{
    package acc(x.f) --* acc(y.f)

    if (i < 0) {
        exhale acc(x.f)
        assert inhaling (i < 0 ? acc(x.f) : true) in applying (acc(x.f) --* acc(y.f)) in y.f == 42
    } else {
        assert inhaling (i < 0 ? acc(x.f) : true) in applying (acc(x.f) --* acc(y.f)) in y.f == 42
    }
}

method test7b(x: Ref, y: Ref, i: Int)
    requires acc(x.f) && acc(y.f)
    requires y.f == 42
{
    package acc(x.f) --* acc(y.f)
    if (i < 0) {
        exhale acc(x.f)
    }

    assert inhaling (i < 0 ? acc(x.f) : true) in applying (acc(x.f) --* acc(y.f)) in y.f == 42
}
